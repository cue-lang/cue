{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2b38d954_246e6143",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-02T17:03:10Z",
      "side": 1,
      "message": "Thanks for doing this. Definitely a good idea. LGTM modulo one suggestion.",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38006420_2eb22327",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-03T09:34:05Z",
      "side": 1,
      "message": "LGTM but I think we should avoid exporting the new API without explicit signoff.",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dc30b29_60ad51a0",
        "filename": "pkg/gen/gen.go",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-02T17:03:10Z",
      "side": 1,
      "message": "Rather than assuming that the CUE file is named after the package, could we instead do the same thing as processCUE, which already ends up with the string that we\u0027re wanting here? That feels like less of a hack (and then we\u0027re free to spread definitions out over multiple files as we\u0027d expect to be able to do normally).",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee34f20d_5d755e7d",
        "filename": "pkg/gen/gen.go",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2022-08-02T21:06:17Z",
      "side": 1,
      "message": "I gave this a try, and it sort of works. I had to remove the ToExpr bit, because I don\u0027t want the whole package as a struct literal - I don\u0027t want the {} around all declarations.\n\nThe comments are gone for some reason. I didn\u0027t quickly spot why.\n\nSome of the syntax also ends up slightly different; e.g. `$id: \u003d~#\"\\.\"#` turns into `$id:     \u003d~\"\\\\.\"`. That\u0027s not wrong per se, but also unnecessary churn.\n\nIf you\u0027re convinced this is the right way, I\u0027m happy to push to a branch and you can play with it. But I imagine it\u0027s not worth our time and we should leave it as a TODO for the future. This change isn\u0027t making things any worse, that I can see.",
      "parentUuid": "9dc30b29_60ad51a0",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e11ca57_ff813b73",
        "filename": "pkg/gen/gen.go",
        "patchSetId": 2
      },
      "lineNbr": 137,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-03T09:34:05Z",
      "side": 1,
      "message": "Yeah, fair enough. I don\u0027t care about the syntax churn too much, but missing the comments is a problem. It definitely is a more \"right\" way, but I\u0027m happy to leave it as is for now.",
      "parentUuid": "ee34f20d_5d755e7d",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b18eb76_cae803bf",
        "filename": "pkg/tool/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-02T17:03:10Z",
      "side": 1,
      "message": "This wasn\u0027t available for import before AFAICS. Are we sure we want to add it?",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "efa8a205_5ea92643",
        "filename": "pkg/tool/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2022-08-02T21:06:17Z",
      "side": 1,
      "message": "See the commit message. I\u0027m not 100% sure whether this is a good or bad idea, but beyond what I wrote in the commit, it\u0027s worth noting that we wouldn\u0027t loop over that package otherwise - meaning no generation.\n\nI guess we could add another special case to the generate loop, to not generate the `Register` line for this package, though I think it\u0027s best to avoid special cases if we can.\n\nWe can always leave it to Paul or Marcel if we\u0027re not sure :)",
      "parentUuid": "1b18eb76_cae803bf",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8bedd225_0aed2a27",
        "filename": "pkg/tool/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-03T09:34:05Z",
      "side": 1,
      "message": "Lacking input from Marcel, I think we should probably be conservative for now and avoid adding to the API. I mean, it\u0027s probably fine, but I\u0027m wary of adding more fuel for Hyrum.",
      "parentUuid": "efa8a205_5ea92643",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da4c9b7a_c1333128",
        "filename": "pkg/tool/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2022-08-03T09:41:52Z",
      "side": 1,
      "message": "Ack. Any thoughts on how to deal with package tool, then? Leave the old generator in place, with a TODO?",
      "parentUuid": "8bedd225_0aed2a27",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "86a3e0ac_452b996d",
        "filename": "pkg/tool/pkg.go",
        "patchSetId": 2
      },
      "lineNbr": 95,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2022-08-04T14:51:45Z",
      "side": 1,
      "message": "Maybe special-case to avoid generating/registering the package?",
      "parentUuid": "da4c9b7a_c1333128",
      "revId": "8b34b8ef5d2483bb618061daf503df77b916a577",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}