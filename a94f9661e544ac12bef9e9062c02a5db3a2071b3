{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "261684ed_e269d478",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2024-06-11T19:43:35Z",
      "side": 1,
      "message": "incomplete?",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11ef5500_fb7eb8ad",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1017723
      },
      "writtenOn": "2024-06-11T17:43:26Z",
      "side": 1,
      "message": "I\u0027m not sure what `FixLegacy` does exactly, but I\u0027m assume it will add the major version suffix to a module path? If so, we don\u0027t want that, correct? Because otherwise error messages etc will refer to a concept alien to the user?",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42227b16_289e2db8",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-06-11T17:57:46Z",
      "side": 1,
      "message": "Hmm. I wonder which error messages those might be. When there are no imports containing a major version suffix (which there shouldn\u0027t be in this kind of situation) and there are no dependencies, I\u0027m not sure that any messages will mention the full module path.\n\nNote that what we\u0027ll get here is exactly the same as if the module file had a language version but no major version suffix on the module path. That behaviour seems to be OK, so I\u0027m not sure this is any different.",
      "parentUuid": "11ef5500_fb7eb8ad",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6d341d5c_c298158c",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1017723
      },
      "writtenOn": "2024-06-11T18:39:52Z",
      "side": 1,
      "message": "```\ngo mod tidy\ngo run .\ncmp stdout stdout.golden\n\n-- cue.mod/module.cue --\nmodule: \"example.com/blah\"\n-- go.mod --\nmodule mod.example\n\ngo 1.22.3\n\nrequire cuelang.org/go v0.9.0\n\nreplace cuelang.org/go \u003d\u003e /home/myitcv/dev/cuelang/cue\n-- main.go --\npackage main\n\nimport (\n\t\"fmt\"\n\n\t\"cuelang.org/go/cue/cuecontext\"\n\t\"cuelang.org/go/cue/load\"\n)\n\nfunc main() {\n\tctx :\u003d cuecontext.New()\n\tbis :\u003d load.Instances([]string{\"example.com/blah\"}, \u0026load.Config{\n\t\tModule:                  \"example.com/blah\",\n\t\tAcceptLegacyModuleFiles: true,\n\t})\n\tv :\u003d ctx.BuildInstance(bis[0])\n\tfmt.Println(v)\n}\n-- rubbish/rubbish.cue --\npackage rubbish\n\nsomething: 5\n-- x.cue --\npackage blah\n\nimport \"example.com/blah/rubbish\"\n\nrubbish\nx: 5\n-- stdout.golden --\n{\n\tx:         5\n\tsomething: 5\n}\n```\n\nShould pass but:\n\n```\n\u003e go mod tidy\n\u003e go run .\n[stderr]\nmain.go:19: inconsistent modules: got \"example.com/blah@v0\", want \"example.com/blah\"\nexit status 1\n\n[exit status 1]\nFAIL: /tmp/testscript1582439590/repro.txtar/script.txtar:2: unexpected go command failure\n```",
      "parentUuid": "42227b16_289e2db8",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6f205b0_652b0174",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-06-11T19:53:43Z",
      "side": 1,
      "message": "tbh I don\u0027t really understand why the Module field is present at all, and I suspect that no-one uses it in practice, but that is a valid point (and probably is an issue for the current modules code too). I\u0027ll change that check to allow a missing major version.",
      "parentUuid": "6d341d5c_c298158c",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e89fefef_6b7f14d0",
        "filename": "cue/load/config.go",
        "patchSetId": 1
      },
      "lineNbr": 423,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-06-11T20:07:54Z",
      "side": 1,
      "message": "Interestingly there is not one single test case that covers Config.Module or anywhere in the cue source code that uses it outside the cue/load package.",
      "parentUuid": "c6f205b0_652b0174",
      "revId": "a94f9661e544ac12bef9e9062c02a5db3a2071b3",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}