{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "37b6c6f6_74ac3065",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-11-10T12:45:08Z",
      "side": 1,
      "message": "can we reuse this? for example, if you have a helper like `func phantomPackageName(string) string`, then you can do `var phantomPackageNameLength \u003d phantomPackageName(\"\")`.\n\n\nor, if you want to go the math route, keep this code as is, and do `var phantomPackageNameLength \u003d 1 + hex.EncodedLen(sha256.Size) // _%x`.",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68d8f919_6eac93be",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 143,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2025-11-10T13:00:17Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "37b6c6f6_74ac3065",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec552ba7_3432eaf2",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 178,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-11-10T12:45:08Z",
      "side": 1,
      "message": "this is slightly inefficient for huge CUE files with no package clause. once you reach any non-preamble declaration (where preamble is a package, an import, or an attribute) you can stop immediately, because you cannot have any more package or import declarations after that point.\n\n\nthis is not easy to do with astutil.Apply, but I\u0027d leave a TODO here for the future.",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "951836ce_3db47b0b",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 178,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2025-11-10T13:00:17Z",
      "side": 1,
      "message": "Thank you for pointing this out. I\u0027ve had a think and I think I\u0027ve implemented a fix for this. LMK what you think.",
      "parentUuid": "ec552ba7_3432eaf2",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7512e67c_25b852af",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 178,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2025-11-10T13:03:47Z",
      "side": 1,
      "message": "Well, my \"fix\" stops us from going deep down the tree for anything. We would still always go over every top-level decl, which is wasteful, but it\u0027s better than it was I think.",
      "parentUuid": "951836ce_3db47b0b",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1b7685e_f9b32b2d",
        "filename": "internal/lsp/fscache/fs_cache.go",
        "patchSetId": 1
      },
      "lineNbr": 178,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-11-10T13:05:26Z",
      "side": 1,
      "message": "ah, clever approach. just one nit to improve it: rather than looping over `file.Decls`, loop over `file.Preamble()`, which is only the preamble declarations. this way you won\u0027t add map entries for e.g. a million top-level fields.\n\n\nFWIW there\u0027s also `internal.Package(*ast.File) *ast.Package`, but that doesn\u0027t use a cursor, so it\u0027s not great for removal. You could consider having it return `(*ast.Package, int)` with an index, and then do something like `file.Decls \u003d slices.Delete(file.Decls, i, i+1)`. I think either approach is fine, I only briefly thought about this one because it avoids needing to build a map.",
      "parentUuid": "951836ce_3db47b0b",
      "revId": "c082f8243255bdda0815ceb6c1e805033af50590",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}