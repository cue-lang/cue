{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "59a0a567_eb560c1f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:29:44Z",
      "side": 1,
      "message": "```suggestion\nThis change adds the `list.MatchN` validator function, which is useful to\n```",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9c7ba4ee_52a56366",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-16T12:11:56Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "59a0a567_eb560c1f",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f733854_058d89da",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "This looks great to me! Thanks very much for doing this, and so quickly. I have a few minor comments and suggestions and I think Marcel should take a look before it lands but otherwise üëç",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f933accc_ab0ef15c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-16T13:04:00Z",
      "side": 1,
      "message": "Hi Haoqixu, thanks for your contributions!\n\nThis is on the right track. Supporting Schema/Constraints in calls is not entirely trivial, though. CL https://review.gerrithub.io/c/cue-lang/cue/+/1194425 was bumping into a similar issue and made some very similar changes to what you are doing! \n\nI suggest we check that in first, which should make your case a bit easier.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e94b0e31_e6920268",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T07:54:31Z",
      "side": 1,
      "message": "Thank you for the information. I think `pkg.Constraint` in this CL doesn\u0027t handle `disjunctions/defaults` as expected. To prevent redundant efforts, I intend to implement `list.MatchN` using `pkg.Schema` from https://review.gerrithub.io/c/cue-lang/cue/+/1194425.",
      "parentUuid": "f933accc_ab0ef15c",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06a81618_09b29e18",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-19T08:01:00Z",
      "side": 1,
      "message": "Great. I\u0027m working on getting Noam\u0027s CL to work, which is a bit more involved than I thought. Completing that will greatly help this CL. Will keep you posted.",
      "parentUuid": "e94b0e31_e6920268",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7f06fbb_70765a43",
        "filename": "internal/pkg/context.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-16T13:04:00Z",
      "side": 1,
      "message": "Doc comment.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74a028f0_cf2c5954",
        "filename": "internal/pkg/context.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T07:54:31Z",
      "side": 1,
      "message": "TODO: remove and use pkg.Schema",
      "parentUuid": "c7f06fbb_70765a43",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f4246417_68675369",
        "filename": "internal/pkg/context.go",
        "patchSetId": 1
      },
      "lineNbr": 67,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-21T09:42:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "74a028f0_cf2c5954",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5ebf18a_a8a61d2f",
        "filename": "internal/pkg/types.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "```suggestion\n// Constraint is a cue.Value that allows a non-concrete value\n// to be passed as a function argument.\n```\n?",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75dc9394_d625c14d",
        "filename": "internal/pkg/types.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-16T12:11:56Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "e5ebf18a_a8a61d2f",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "47f2cb91_98650713",
        "filename": "internal/pkg/types.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-16T13:04:00Z",
      "side": 1,
      "message": "All cue.Values allow non-concrete values. Also, not all constraints are cue.Values.",
      "parentUuid": "e5ebf18a_a8a61d2f",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43a1be80_a2af3218",
        "filename": "internal/pkg/types.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T07:54:31Z",
      "side": 1,
      "message": "TODO: remove and use pkg.Schema",
      "parentUuid": "47f2cb91_98650713",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6c1450dc_276492c4",
        "filename": "internal/pkg/types.go",
        "patchSetId": 1
      },
      "lineNbr": 22,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-21T09:42:14Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "43a1be80_a2af3218",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79245381_aa620759",
        "filename": "pkg/gen.go",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "```suggestion\n\t// Allow a *pkg.CallCtxt value as the first parameter.\n```\n?",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7648df5c_643ae959",
        "filename": "pkg/gen.go",
        "patchSetId": 1
      },
      "lineNbr": 324,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-16T12:11:56Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "79245381_aa620759",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b12d1bb_f1926fc9",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "```suggestion\n// \"n\" may be a number constraint and does not have to be a concrete number.\n// Likewise, matchValue will usually be a non-concrete value.\n```\n\nAlso, I suspect we should follow the lead of the newly proposed `matchN` builtin function (see https://review.gerrithub.io/c/cue-lang/cue/+/1198923) and finalize `list` before unifying.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19f03a48_dbc08a77",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 290,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2024-08-21T16:54:47Z",
      "side": 1,
      "message": "@hq.xu0o0@gmail.com did you resolve this one?",
      "parentUuid": "3b12d1bb_f1926fc9",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94c70ae4_c2b3fca3",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 299,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "```suggestion\n\t\tif cue.Value(matchValue).Unify(w).Validate() \u003d\u003d nil {\n\t\t\tnmatch++\n\t\t}\n\t}\n```",
      "range": {
        "startLine": 295,
        "startChar": 0,
        "endLine": 299,
        "endChar": 0
      },
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1f6e2ffa_ba2ce93c",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 299,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-16T12:11:56Z",
      "side": 1,
      "message": "Fix applied.",
      "parentUuid": "94c70ae4_c2b3fca3",
      "range": {
        "startLine": 295,
        "startChar": 0,
        "endLine": 299,
        "endChar": 0
      },
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2b9e7ae_adbdde35",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 305,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "```suggestion\n\t\t\t\tn.Pos(),\n```\n\nAlso, perhaps we should include the position for the constraint and perhaps for the list itself, although perhaps that last happens naturally?",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c11914f7_d15f3a90",
        "filename": "pkg/list/list.go",
        "patchSetId": 1
      },
      "lineNbr": 305,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T09:10:40Z",
      "side": 1,
      "message": "it seems unnecessary, because `BuiltinValidator.validate()` will attach source positions to the validation errors.",
      "parentUuid": "c2b9e7ae_adbdde35",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e06b228_78d8c978",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-16T13:04:00Z",
      "side": 1,
      "message": "Ideally, please use a different field per test case. If you want them to apply to the same list, you can write `[\u003d~\"^l\"]: [ ... ]`, for instance to mix in some value with all variants.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "99f2a434_299dac7d",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T09:10:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e06b228_78d8c978",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c630f93d_631ca014",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2024-08-16T13:04:00Z",
      "side": 1,
      "message": "`matchN` is only allowed to be used as a validator. In general, this is probably where we want to go. Ideally, this is enforced in MatchN as well.\n\nAt the very least, though, tests should not pass the list as a first argument.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b358ee7_92f7650f",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T09:10:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c630f93d_631ca014",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6bdf09ca_f4186a41",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "I don\u0027t get why these aren\u0027t errors rather than just being false.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60e6b0e9_f91e6847",
        "filename": "pkg/list/testdata/matchn.txtar",
        "patchSetId": 1
      },
      "lineNbr": 39,
      "author": {
        "id": 1037721
      },
      "writtenOn": "2024-08-19T09:10:40Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6bdf09ca_f4186a41",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1bfc4988_eacaf466",
        "filename": "pkg/list/testdata/matchn_err.txtar",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1007275
      },
      "writtenOn": "2024-08-16T11:27:26Z",
      "side": 1,
      "message": "It\u0027s interesting that these errors don\u0027t mention the position of the actual list data, but I suspect that\u0027s just a general shortcoming of the new evaluator and will be fixed elsewhere in time.",
      "revId": "c19158023321df9f808bce0afd09fea84251b64e",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}