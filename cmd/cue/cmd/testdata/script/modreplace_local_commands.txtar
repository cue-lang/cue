# Test that various cue commands work with local replacements

# Test cue mod tidy
exec cue mod tidy

# Test cue eval
exec cue eval .
stdout 'output: "from local"'

# Test cue export
exec cue export .
stdout '"from local"'

# Test cue vet (should pass validation)
exec cue vet .

# Test cue def (show definitions)
exec cue def .
stdout 'output:'

-- cue.mod/module.cue --
module: "example.com/main@v0"
language: version: "v0.9.0"

deps: {
    "example.com/dep@v0": {
        v: "v0.1.0"
        replace: "./local-dep"
    }
}
-- main.cue --
package main

import "example.com/dep@v0:lib"

output: lib.value
-- local-dep/cue.mod/module.cue --
module: "example.com/dep@v0"
language: version: "v0.9.0"
-- local-dep/lib.cue --
package lib

value: "from local"
