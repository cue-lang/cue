raw: true
eval: true
noOpt: true
-- in.cue --
{
	job: [Name=_]: {
		name:     Name
		replicas: uint | *1 @protobuf(10)
		command:  string
	}

	job: list: command: "ls"

	job: nginx: {
		command:  "nginx"
		replicas: 2
	}
}
-- out/compile --
--- in.cue
{
  {
    job: {
      [_]: {
        name: 〈1;-〉
        replicas: (&(int, >=0)|*1)
        command: string
      }
    }
    job: {
      list: {
        command: "ls"
      }
    }
    job: {
      nginx: {
        command: "nginx"
        replicas: 2
      }
    }
  }
}
-- out/eval --
(struct){
  job: (struct){
    list: (struct){
      command: (string){ "ls" }
      name: (string){ "list" }
      replicas: (int){ |(*(int){ 1 }, (int){ &(>=0, int) }) }
    }
    nginx: (struct){
      command: (string){ "nginx" }
      replicas: (int){ 2 }
      name: (string){ "nginx" }
    }
  }
}
