#name: conflicts in optional fields are okay 
#evalFull
-- in.cue --
d: {a: 1, b?: 3} | {a: 2}

// the following conjunction should not eliminate any disjuncts
c: d & {b?: 4}
-- out/compile --
--- in.cue
{
  d: ({
    a: 1
    b?: 3
  }|{
    a: 2
  })
  c: (〈0;d〉 & {
    b?: 4
  })
}
-- out/eval --
(struct){
  d: (struct){ |((struct){
      a: (int){ 1 }
      b?: (int){ 3 }
    }, (struct){
      a: (int){ 2 }
    }) }
  c: (struct){ |((struct){
      b?: (_|_){
        // [eval] c.b: conflicting values 3 and 4:
        //     ./in.cue:1:15
        //     ./in.cue:4:4
        //     ./in.cue:4:13
      }
      a: (int){ 1 }
    }, (struct){
      b?: (int){ 4 }
      a: (int){ 2 }
    }) }
}
