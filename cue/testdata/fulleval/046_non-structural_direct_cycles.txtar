#name: non-structural direct cycles
#evalFull
-- in.cue --
c1: {bar: baz: 2} & c1.bar
c2: {bar:      1} & c2.bar
-- out/compile --
--- in.cue
{
  c1: ({
    bar: {
      baz: 2
    }
  } & 〈0;c1〉.bar)
  c2: ({
    bar: 1
  } & 〈0;c2〉.bar)
}
-- out/evalalpha --
Errors:
c2: conflicting values 1 and {bar:1} (mismatched types int and struct):
    ./in.cue:2:5
    ./in.cue:2:16
    ./in.cue:2:21

Result:
(_|_){
  // [eval]
  c1: (struct){
    bar: (struct){
      baz: (int){ 2 }
    }
    baz: (int){ 2 }
  }
  c2: (_|_){
    // [eval] c2: conflicting values 1 and {bar:1} (mismatched types int and struct):
    //     ./in.cue:2:5
    //     ./in.cue:2:16
    //     ./in.cue:2:21
    bar: (_|_){// 1
    }
  }
}
-- diff/-out/evalalpha<==>+out/eval --
diff old new
--- old
+++ new
@@ -2,6 +2,7 @@
 c2: conflicting values 1 and {bar:1} (mismatched types int and struct):
     ./in.cue:2:5
     ./in.cue:2:16
+    ./in.cue:2:21
 
 Result:
 (_|_){
@@ -16,6 +17,8 @@
     // [eval] c2: conflicting values 1 and {bar:1} (mismatched types int and struct):
     //     ./in.cue:2:5
     //     ./in.cue:2:16
-    bar: (int){ 1 }
+    //     ./in.cue:2:21
+    bar: (_|_){// 1
+    }
   }
 }
