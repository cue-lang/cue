{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "68a5c3ae_99b9f4f8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 10,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "I guess this makes sense from the perspective of the LSP internals, but it\u0027s breaking my brain a bit. For example, can an \"embed package\" contain normally loaded CUE files? can it \"import\" other packages? is it technically still part of the module?\n\nI might find it easier if we gave these a special name with a clear definition somewhere, like \"embed pseudo-package\" or \"embed virtual package\".",
      "range": {
        "startLine": 10,
        "startChar": 33,
        "endLine": 10,
        "endChar": 61
      },
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c04aebe5_fca2c7e2",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 10,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "\u003e For example, can an \"embed package\" contain normally loaded CUE files?\n\nNot in practice, no.\n\n\u003e can it \"import\" other packages?\n\nAgain, not in practice: reading+parsing such a file would return an AST with a unique package name and no imports.\n\n\u003e is it technically still part of the module?\n\nYes. An file can only be embedded if it resides in the same module as the CUE file with the @embed attribute.\n\n\u003e I might find it easier if we gave these a special name with a clear definition somewhere, like \"embed pseudo-package\" or \"embed virtual package\".\n\nI\u0027m not massively against that, but equally we\u0027ve not done that for files-with-no-package-decl-that-exist-within-a-module. These also get read and parsed and will have a unique package name and are considered part of the module.",
      "parentUuid": "68a5c3ae_99b9f4f8",
      "range": {
        "startLine": 10,
        "startChar": 33,
        "endLine": 10,
        "endChar": 61
      },
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58c4a3b9_b9c3bc77",
        "filename": "/COMMIT_MSG",
        "patchSetId": 6
      },
      "lineNbr": 10,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T15:07:27Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "c04aebe5_fca2c7e2",
      "range": {
        "startLine": 10,
        "startChar": 33,
        "endLine": 10,
        "endChar": 61
      },
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e19c39da_05f9865b",
        "filename": "cmd/cue/cmd/integration/workspace/embedded_test.go",
        "patchSetId": 6
      },
      "lineNbr": 147,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "every single LogMatching call comes with fmt.Sprintf - make that part of the func body?",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "41cbb86f_0f618cc2",
        "filename": "cmd/cue/cmd/integration/workspace/embedded_test.go",
        "patchSetId": 6
      },
      "lineNbr": 147,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e19c39da_05f9865b",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d50e6072_6dc0adb4",
        "filename": "cue/interpreter/embed/embed.go",
        "patchSetId": 6
      },
      "lineNbr": 503,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "nit: MatchAll tells me that it returns a boolean saying whether all files in the FS match the embed pattern. I think FindAll would be a more intuitive name, like https://pkg.go.dev/regexp#Regexp.FindAllString versus https://pkg.go.dev/regexp#Regexp.MatchString being the Matches method above.",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22ff74c7_47c73c9f",
        "filename": "cue/interpreter/embed/embed.go",
        "patchSetId": 6
      },
      "lineNbr": 503,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "Totally agree, thank you.",
      "parentUuid": "d50e6072_6dc0adb4",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d6af16d9_8170d677",
        "filename": "internal/lsp/cache/folder.go",
        "patchSetId": 6
      },
      "lineNbr": 59,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "nit: add ndjson as well, which is actually the new version of the ldjson extension, and what we document in `cue help filetypes`.",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "015cb713_96540297",
        "filename": "internal/lsp/cache/folder.go",
        "patchSetId": 6
      },
      "lineNbr": 59,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "agh, actually I\u0027ve got this wrong. It should be jsonld, not ldjson. I.e. I\u0027m *not* supporting newline-delimited json at this point. Ah, but it seems I\u0027ve just got myself confused and we don\u0027t support jsonld at all elsewhere, so actually this entry should just be removed totally for now.",
      "parentUuid": "d6af16d9_8170d677",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec0e5675_b5a5f1f5",
        "filename": "internal/lsp/cache/package.go",
        "patchSetId": 6
      },
      "lineNbr": 175,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "I thought that you needed to use a special method to properly decode paths from file URI strings",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8d25c82_c200fa49",
        "filename": "internal/lsp/cache/package.go",
        "patchSetId": 6
      },
      "lineNbr": 175,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T10:43:08Z",
      "side": 1,
      "message": "Yes good point. The client is meant to be consistent, so doing the cut/trim is fine. But yes, the fact the remains is actually used (without decoding) is a problem. I\u0027ll do another pass looking for those cases.",
      "parentUuid": "ec0e5675_b5a5f1f5",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f3c3ffb0_76ebdf5e",
        "filename": "internal/lsp/cache/package.go",
        "patchSetId": 6
      },
      "lineNbr": 175,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T13:47:15Z",
      "side": 1,
      "message": "I\u0027ve added two CLs onto the end of this stack that address this. Hope that\u0027s ok.",
      "parentUuid": "d8d25c82_c200fa49",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c44fa4f4_e492a405",
        "filename": "internal/lsp/cache/package.go",
        "patchSetId": 6
      },
      "lineNbr": 425,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "should this not be some sort of constant?",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f3b155ca_00025b03",
        "filename": "internal/lsp/cache/package.go",
        "patchSetId": 6
      },
      "lineNbr": 425,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c44fa4f4_e492a405",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b19b5ac8_cd5b8ad8",
        "filename": "internal/lsp/cache/workspace.go",
        "patchSetId": 6
      },
      "lineNbr": 950,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "as before, I\u0027m confused why the func could return `ip \u003d\u003d nil` when `err \u003d\u003d nil`",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aab79926_61e763d7",
        "filename": "internal/lsp/cache/workspace.go",
        "patchSetId": 6
      },
      "lineNbr": 950,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T12:46:52Z",
      "side": 1,
      "message": "Valid file, but with no package decl. Having thought a bit harder about this, we *could* change the documentation for fscache.FileHandle to declare the ReadCUE method, if it returns a non-nil ast.File, then that ast.File MUST have a valid package decl. Personally I think that would be a bit weird. Yes, at the moment we inject phantom package names if the file is missing one, but it still feels a bit weird to me to require that in the interface.",
      "parentUuid": "b19b5ac8_cd5b8ad8",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5ae41870_d74ad9f4",
        "filename": "internal/lsp/cache/workspace.go",
        "patchSetId": 6
      },
      "lineNbr": 950,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T15:07:27Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "aab79926_61e763d7",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8009b2e_90494956",
        "filename": "internal/lsp/cache/workspace.go",
        "patchSetId": 6
      },
      "lineNbr": 1012,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2026-02-11T10:10:58Z",
      "side": 1,
      "message": "just to check - did you mean to break out of the outer loop, matching the earlier \"continue\"?",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58ec6877_98039307",
        "filename": "internal/lsp/cache/workspace.go",
        "patchSetId": 6
      },
      "lineNbr": 1012,
      "author": {
        "id": 1038145
      },
      "writtenOn": "2026-02-11T10:43:08Z",
      "side": 1,
      "message": "Nope. We\u0027ve marked the ascendantPkg dirty, there\u0027s nothing else to do with that package, so we need to move on to the next ascendantPkg. So we\u0027re just breaking out of the inner loop.",
      "parentUuid": "e8009b2e_90494956",
      "revId": "f522ae1043381a3a164c30f7eba52fb819ca7c7b",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}