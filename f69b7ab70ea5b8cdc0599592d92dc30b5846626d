{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "eda4c306_e492b88c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1019304
      },
      "writtenOn": "2022-01-31T00:38:17Z",
      "side": 1,
      "message": "I happened to be in this code today, and get on gerrit, so I thought I\u0027d add a review",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9e93205b_d0a8dc59",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1017723
      },
      "writtenOn": "2022-01-31T15:40:13Z",
      "side": 1,
      "message": "LGTM - but I defer to Marcel for the authoritative answer on Tony\u0027s questions",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cc57ac49_4f69275d",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1019304
      },
      "writtenOn": "2022-01-31T00:38:17Z",
      "side": 1,
      "message": "does this mean that any struct with an `$id: _` looks like a task?\n\nShould the same lookup to see if it is a known task logic be used for this as well?",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2efce63a_ca482881",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1017723
      },
      "writtenOn": "2022-01-31T15:40:13Z",
      "side": 1,
      "message": "\u003e does this mean that any struct with an `$id: _` looks like a task?\n\nThis has always been the case AFAIK. And we keep it for backwards compatibility.\n\n\u003e Should the same lookup to see if it is a known task logic be used for this as well?\n\nAfraid I don\u0027t follow your question",
      "parentUuid": "cc57ac49_4f69275d",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab94c707_27a28bc9",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1019304
      },
      "writtenOn": "2022-01-31T17:09:35Z",
      "side": 1,
      "message": "Not sure how backwards compatibility is impacted here. It seems that any struct with $id, which is not a known task type to cue/cmd, will eventually fail anyhow. Why build a task in the first place?\n\nWhat I am suggesting is to only create a task from structs with $id when it is a recognized task, by making a lookup for such tasks earlier. This is the same idea as looking for the `kind` field to see if it is something cmd/cmd recognizes as a task.",
      "parentUuid": "2efce63a_ca482881",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c718959d_f5c81d62",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2022-01-31T18:35:04Z",
      "side": 1,
      "message": "Generally it is bad practice to let a field like $id count only if it has a special value, as it means that the introduction of any new task type can be a breaking change. This is not the case for \"kind\" as it was only supported for backwards compatibility and only previously supported types are supported. This CL avoids clashes with Kubernetes objects, which use \"kind\" heavily.\n\nThe plan is to ultimately redo all this as cuerun, instead of cue cmd. The right thing to do, really, is to use hidden fields tied to the tool package, for instance, ensuring there can never be any conflict at all.",
      "parentUuid": "ab94c707_27a28bc9",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80139e98_d71ad722",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 171,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2022-01-31T18:45:22Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c718959d_f5c81d62",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55685328_17861565",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1019304
      },
      "writtenOn": "2022-01-31T00:38:17Z",
      "side": 1,
      "message": "i.e. make this lookup before saying that a struct with `$id` is a task?",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0140eef_fe737e0f",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2022-01-31T18:35:04Z",
      "side": 1,
      "message": "See above.",
      "parentUuid": "55685328_17861565",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77a54cbd_c34d4a14",
        "filename": "cmd/cue/cmd/custom.go",
        "patchSetId": 1
      },
      "lineNbr": 205,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2022-01-31T18:45:22Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "f0140eef_fe737e0f",
      "revId": "f69b7ab70ea5b8cdc0599592d92dc30b5846626d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}