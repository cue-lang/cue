{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3c316110_03a494f1",
        "filename": "internal/core/adt/typocheck.go",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-03-15T19:38:40Z",
      "side": 1,
      "message": "how do you know you won\u0027t reach a defID which conflicts with deleteID? do we have any sort of overflow protection?\n\nalso, this is the maximum uint16 value, but defID is a uint32; is that intentional?",
      "revId": "fdce934b96b301fbea31ddfcc3d34c3862da1579",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef99fd6d_6bbedbe9",
        "filename": "internal/core/adt/typocheck.go",
        "patchSetId": 8
      },
      "lineNbr": 119,
      "author": {
        "id": 1013536
      },
      "writtenOn": "2025-03-17T13:05:40Z",
      "side": 1,
      "message": "Good point. It should be 0xffff_ffff. Fixed.\n\nWith that, the machines memory limit is a natural protection.",
      "parentUuid": "3c316110_03a494f1",
      "revId": "fdce934b96b301fbea31ddfcc3d34c3862da1579",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c4dd08bb_ec1b5981",
        "filename": "internal/core/adt/typocheck.go",
        "patchSetId": 8
      },
      "lineNbr": 557,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-03-15T19:38:40Z",
      "side": 1,
      "message": "FYI Thomas\u0027s large config manages to hit a panic here; sharing the panic trace below. We can look together into this on Monday. I am able to reproduce reliably, but if I try to cut down the size of the config in any way, the panic goes away too, which is odd. Perhaps you can guess what\u0027s causing it.\n\n```\npanic: runtime error: index out of range [0] with length 0 [recovered, reraised]\n\ngoroutine 1 [running]:\ncuelang.org/go/internal/core/adt.runTask.func1()\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:684 +0x76\npanic({0x1047420?, 0xc0539b4840?})\n\t/home/mvdan/tip/src/runtime/panic.go:783 +0x132\ncuelang.org/go/internal/core/adt.runTask.func1()\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:684 +0x76\npanic({0x1047420?, 0xc0539b4840?})\n\t/home/mvdan/tip/src/runtime/panic.go:783 +0x132\ncuelang.org/go/internal/core/adt.runTask.func1()\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:684 +0x76\npanic({0x1047420?, 0xc0539b4840?})\n\t/home/mvdan/tip/src/runtime/panic.go:783 +0x132\ncuelang.org/go/internal/core/adt.(*reqSets).replaceIDs(0xc001222098, {0xc0320cc8c0, 0x1, 0x1})\n\t/home/mvdan/src/c/cue/internal/core/adt/typocheck.go:557 +0x225\ncuelang.org/go/internal/core/adt.appendRequired({0xc053bb0d00, 0x55, 0x90}, 0xc053b5ca08)\n\t/home/mvdan/src/c/cue/internal/core/adt/typocheck.go:674 +0x1f4\ncuelang.org/go/internal/core/adt.(*nodeContext).checkTypos(0xc053b5ca08)\n\t/home/mvdan/src/c/cue/internal/core/adt/typocheck.go:372 +0x79\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc0537cf860, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:434 +0xd48\ncuelang.org/go/internal/core/adt.(*nodeContext).doDisjunct(0xc053218a08, {0xc00bc8f3e0, {0x1272428, 0xc0003a21b0}, {0x0, 0xfff5, 0x0, 0xff14, 0x1, 0x0, ...}}, ...)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:516 +0x3dd\ncuelang.org/go/internal/core/adt.(*nodeContext).crossProduct(0xc053218a08, {0xc001222840?, 0x17be538?, 0x1321332?}, {0xc001222890, 0x1, 0x0?}, 0xc053466d80, 0x4, 0x2b7a4)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:422 +0x4a5\ncuelang.org/go/internal/core/adt.(*nodeContext).processDisjunctions(0xc053218a08)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:332 +0x565\ncuelang.org/go/internal/core/adt.processDisjunctions(0xc000d92c00?, 0xc0539fe900, 0xd9?)\n\t/home/mvdan/src/c/cue/internal/core/adt/tasks.go:215 +0x1c\ncuelang.org/go/internal/core/adt.runTask(0xc0539fe900, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:706 +0x502\ncuelang.org/go/internal/core/adt.(*scheduler).process(0xc053218bf8, 0x7f7f, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:404 +0x155\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc05317fc20, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:220 +0x48d\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b39508, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc034b53a40, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b3c708, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc034b539a0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b3dc08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc034b53860, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b3e308, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc034b537c0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b3f108, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc034b53680, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b3f808, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc033625ae0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b46708, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc033625a40, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b4d108, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc0336259a0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b52708, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc033625860, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b52e08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc0336252c0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049b53c08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc033625180, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).doDisjunct(0xc049844708, {0xc060d80d20, {0x1272428, 0xc000303cd0}, {0x0, 0xff1d, 0x0, 0xff14, 0x1, 0x0, ...}}, ...)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:516 +0x3dd\ncuelang.org/go/internal/core/adt.(*nodeContext).crossProduct(0xc049844708, {0xc001225f68?, 0x17be538?, 0x1321332?}, {0xc001225fb8, 0x1, 0x0?}, 0xc0d244a700, 0x4, 0x2b52a)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:422 +0x4a5\ncuelang.org/go/internal/core/adt.(*nodeContext).processDisjunctions(0xc049844708)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:332 +0x565\ncuelang.org/go/internal/core/adt.processDisjunctions(0xc000d92c00?, 0xc03207f290, 0xd9?)\n\t/home/mvdan/src/c/cue/internal/core/adt/tasks.go:215 +0x1c\ncuelang.org/go/internal/core/adt.runTask(0xc03207f290, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:706 +0x502\ncuelang.org/go/internal/core/adt.(*scheduler).process(0xc0498448f8, 0x7f7f, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:404 +0x155\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc032167180, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:220 +0x48d\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049844e08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc0321670e0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).doDisjunct(0xc049521c08, {0xc060ba1460, {0x1272428, 0xc000303940}, {0x0, 0xff1c, 0x0, 0xff14, 0x1, 0x0, ...}}, ...)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:516 +0x3dd\ncuelang.org/go/internal/core/adt.(*nodeContext).crossProduct(0xc049521c08, {0xc001226f30?, 0x17be538?, 0x2601321300?}, {0xc001226f80, 0x1, 0x0?}, 0xc0d1569380, 0x4, 0x2b529)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:422 +0x4a5\ncuelang.org/go/internal/core/adt.(*nodeContext).processDisjunctions(0xc049521c08)\n\t/home/mvdan/src/c/cue/internal/core/adt/disjunct2.go:332 +0x565\ncuelang.org/go/internal/core/adt.processDisjunctions(0xc000d92c00?, 0xc03207e900, 0xd9?)\n\t/home/mvdan/src/c/cue/internal/core/adt/tasks.go:215 +0x1c\ncuelang.org/go/internal/core/adt.runTask(0xc03207e900, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:706 +0x502\ncuelang.org/go/internal/core/adt.(*scheduler).process(0xc049521df8, 0x7f7f, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/sched.go:404 +0x155\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc03203cbe0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:220 +0x48d\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049520e08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc03203ca00, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc049501108, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc03203c1e0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc0494dd508, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc031c44dc0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc05833b808, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc0582ddc20, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc0011b4308, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc00107e0a0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc000ce4e08, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc000a386e0, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*nodeContext).completeAllArcs(0xc000ce4708, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:544 +0xfd\ncuelang.org/go/internal/core/adt.(*Vertex).unify(0xc000a38640, 0xc000d92c00, 0x7fff, 0x4)\n\t/home/mvdan/src/c/cue/internal/core/adt/unify.go:296 +0x94c\ncuelang.org/go/internal/core/adt.(*OpContext).unify(0xc000dc5a40?, 0x1271940?, 0xdf2900?)\n\t/home/mvdan/src/c/cue/internal/core/adt/eval.go:160 +0x190\ncuelang.org/go/internal/core/adt.(*Vertex).Finalize(0x40bd6b?, 0xc000d92c00)\n\t/home/mvdan/src/c/cue/internal/core/adt/composite.go:1009 +0x59\ncuelang.org/go/cue.newVertexRoot(0xc0002fe200, 0x73b62cfb?, 0xc000a38640)\n\t/home/mvdan/src/c/cue/cue/types.go:590 +0x25\ncuelang.org/go/cue.newValueRoot(0x0?, 0xc001075630?, {0x127a540?, 0xc000a38640?})\n\t/home/mvdan/src/c/cue/cue/types.go:599 +0x3e\ncuelang.org/go/cue.(*Context).make(0xc0002fe200, 0xc000a38640)\n\t/home/mvdan/src/c/cue/cue/context.go:252 +0x79\ncuelang.org/go/cue.(*Context).BuildInstances(0xc0002fe200, {0xc0012298f8, 0x1, 0x7780614f3ed8?})\n\t/home/mvdan/src/c/cue/cue/context.go:150 +0x1ea\ncuelang.org/go/cmd/cue/cmd.buildInstances(0xc0002ce870, {0xc0012298f8, 0x1, 0xf10080?}, 0x1)\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/common.go:714 +0x45\ncuelang.org/go/cmd/cue/cmd.parseArgs(0xc0002ce870, {0xc000302160, 0x1, 0x1}, 0xc000267810)\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/common.go:593 +0xbac\ncuelang.org/go/cmd/cue/cmd.runExport(0xc0002ce870, {0xc000302160, 0x1, 0x1})\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/export.go:114 +0x8a\ncuelang.org/go/cmd/cue/cmd.newExportCmd.mkRunE.func1(0xc0002e0800?, {0xc000302160, 0x1, 0x1})\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/root.go:158 +0x3a7\ngithub.com/spf13/cobra.(*Command).execute(0xc0002df208, {0xc000302120, 0x1, 0x1})\n\t/home/mvdan/go/pkg/mod/github.com/spf13/cobra@v1.9.1/command.go:1015 +0xaaa\ngithub.com/spf13/cobra.(*Command).ExecuteC(0xc0002de008)\n\t/home/mvdan/go/pkg/mod/github.com/spf13/cobra@v1.9.1/command.go:1148 +0x46f\ngithub.com/spf13/cobra.(*Command).Execute(...)\n\t/home/mvdan/go/pkg/mod/github.com/spf13/cobra@v1.9.1/command.go:1071\ncuelang.org/go/cmd/cue/cmd.(*Command).Run(0xc0002ce870, {0x19cffc0?, 0xf6c760?})\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/root.go:382 +0x1c\ncuelang.org/go/cmd/cue/cmd.Main()\n\t/home/mvdan/src/c/cue/cmd/cue/cmd/root.go:290 +0x95\nmain.main()\n\t/home/mvdan/src/c/cue/cmd/cue/main.go:24 +0x13\n```",
      "revId": "fdce934b96b301fbea31ddfcc3d34c3862da1579",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03b6655b_35162094",
        "filename": "internal/core/adt/typocheck.go",
        "patchSetId": 8
      },
      "lineNbr": 557,
      "author": {
        "id": 1017720
      },
      "writtenOn": "2025-03-17T08:20:42Z",
      "side": 1,
      "message": "You fixed this in PS9, thanks!",
      "parentUuid": "c4dd08bb_ec1b5981",
      "revId": "fdce934b96b301fbea31ddfcc3d34c3862da1579",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}