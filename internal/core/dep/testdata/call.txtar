-- in.cue --
import "encoding/json"

// The reference to string needs to be included even for Visit.
a: b: json.Marshal({#a: str})

str: "x:y:z"
-- out/dependencies/field --
4: json.Marshal: "encoding/json".Marshal
4: str:          str
-- out/dependencies/all --
4: json.Marshal: "encoding/json".Marshal
4: str:          str
-- out/dependencies/dynamic --
4: json.Marshal: "encoding/json".Marshal
4: str:          str
