
#exp:explicitopen

-- cue.mod/module.cue --
module: "early.test"

language: version: "v0.15.0"

-- a.cue --
package foo

#A: a: int

X: {
	#A
}
str: "bar"
Y: {
	// Do not add ellipsis where unnecessary.
	[1, 2]
	1,
	"foo",
	"foo\(str)"
	<=10,
	{b: int}
}

_repo: {}
inList: {
	steps: [
		for v in _repo.checkoutCode {v},
		for v in installGo {v},
		{
			name: "foo"
		},
	]
}
inClose: {
	workflows: close({
		_repo
	})
}
nestedStruct: {
	containsTrybotTrailer: {
		{#foo}
	}
}
-- b.cue --
// Already tagged, so do not do any changes.
@experiment(explicitopen)

package foo

#A: a: int

X: {
	#A
}
-- out/fixmod --
--- cue.mod/module.cue
module: "early.test"
language: {
	version: "v0.15.0"
}
--- a.cue
@experiment(explicitopen)

package foo

#A: a: int

X: __reclose({
	#A...
})
str: "bar"
Y: {
	// Do not add ellipsis where unnecessary.
	[1, 2]
	1
	"foo"
	"foo\(str)"
	<=10
	{b: int}
}

_repo: {}
inList: {
	steps: [
		for v in _repo.checkoutCode {v...},
		for v in installGo {v...},
		{
			name: "foo"
		},
	]
}
inClose: {
	workflows: close(__reclose({
		_repo...
	}))
}
nestedStruct: {
	containsTrybotTrailer: __reclose({
		{#foo...}
	})
}
--- b.cue
// Already tagged, so do not do any changes.
@experiment(explicitopen)

package foo

#A: a: int

X: {
	#A
}
